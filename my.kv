WindowManager:
    MainWindow:
    JournalWindow:
    HistoryWindow:
    NegativityPebbleApp:

<MainWindow>:
    name: "main"
    
    FloatLayout:
       
        Label:
            text: "name of app goes here"
            font_size: '30sp'
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}

        Button:
            text: "New Entry"
            size_hint: (0.3, 0.2)
            pos_hint: {'center_x': 0.2, 'center_y': 0.3}
            on_release:
                app.root.current = "journal"
                root.manager.transition.direction = "left"
        
        Button:
            text: "Track Mood"
            size_hint: (0.3, 0.2)
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            on_release:
                app.root.current = "negativitypebble"
                root.manager.transition.direction = "left"

        Button:
            text: "See Previous Entries"
            size_hint: (0.3, 0.2)
            pos_hint: {'center_x': 0.8, 'center_y': 0.3}
            on_release:
                app.root.current = "history"
                root.manager.transition.direction = "left"


<JournalWindow>:
    name: "journal"

    entry: entry

    GridLayout:
        cols: 1

        Label:
            text: "How are you feeling?"
        
        TextInput:
            id: entry
            multiline: False

        GridLayout:
            cols: 2

            Button:
                text: "Back"
                on_release:
                    app.root.current = "main"
                    root.manager.transition.direction = "right"
            
            Button:
                text: "Submit"
                on_press: root.save_btn_press()

<HistoryWindow>:
    name: "history"
    entries: entries

    GridLayout:
        cols: 1
        # size: root.width, root.height

        Button:
            text: "show most recent entry"
            on_press: root.show_btn_press()

        Label:
            id: entries
            text: ""
        
        Button:
            text: "Back"
            on_release:
                app.root.current = "main"
                root.manager.transition.direction = "right"


<NegativityPebbleApp>:
    name: "negativitypebble"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'pond.webp'
    FloatLayout:
        Image:
            source: 'pond.webp'
            allow_stretch: True
            keep_ratio: False
            size_hint: 1,1
        
        Label:
            id: heading
            text: 'Negativity Pebble'
            font_size: 150
            font_name: 'titlefont.ttf'
            pos_hint: {'center_x': 0.5, 'center_y': 0.8}
            color: 0.4, 0.2, 0.1, 1
        
            # canvas.before:
            #     Color:
            #         rgba: 1,1,1,0.5
            #     Rectangle:
            #         pos: 250, 550
            #         size: self.width*0.5, self.height*0.1
        Image:
            id: pebble
            source: 'pebble.png'
            size_hint: 0.35, 0.5
            pos_hint: {'center_x':.5, 'center_y':.5}
            opacity: 1 
            allow_stretch: True
            keep_ratio: False

        TextInput:
            id: negative_message
            hint_text: "Write down a negative thought"
            size_hint: 0.3, 0.1
            pos_hint: {'center_x':.5, 'center_y':.5}
            multiline: False
            font_size: 15
            font_name: 'contentfont.ttf'
    
        Button:
            id: throw_button
            text: 'throw!'
            on_press: root.throw_action()#root.animate_it(self)
            # on_press: root.animate_it(pebble)
            #on_release: root.animate_it(self)
            size_hint: 0.2, 0.1
            pos: 400, 80
            color: 1, 1, 0.8, 1
            background_color: 1, 0.5, 0.259,1

        Button:
            text: "Back"
            pos_hint: {'center_x':0.95, 'center_y':0.95}
            size_hint: 0.1, 0.1
            on_release:
                app.root.current = "main"
                root.manager.transition.direction = "right"

